categories = {
    # POLITICS & GOVERNANCE - Maximum accuracy with specific political terminology
    "Politics": [
        # Core Political Terms
        "government", "governance", "political", "politics", "policy", "policies", 
        "minister", "prime minister", "president", "vice president", "chief minister",
        "governor", "lieutenant governor", "mayor", "deputy", "secretary", "cabinet",
        
        # Elections & Democracy
        "election", "electoral", "vote", "voting", "voter", "ballot", "polling", "poll",
        "campaign", "candidate", "nomination", "primary", "general election", "by-election",
        "referendum", "plebiscite", "constituency", "electorate", "swing vote", "exit poll",
        
        # Legislative Bodies
        "parliament", "parliamentary", "congress", "senate", "house", "assembly", 
        "legislature", "lok sabha", "rajya sabha", "state assembly", "municipal corporation",
        "council", "committee", "subcommittee", "caucus", "faction",
        
        # Political Processes
        "legislation", "bill", "act", "amendment", "resolution", "motion", "debate",
        "hearing", "session", "sitting", "adjournment", "prorogation", "dissolution",
        "impeachment", "no confidence", "censure", "veto", "override",
        
        # Political Ideologies & Parties
        "bjp", "congress", "aap", "tmc", "dmk", "aiadmk", "left", "right", "center",
        "coalition", "alliance", "opposition", "ruling party", "majority", "minority",
        "liberal", "conservative", "progressive", "socialist", "communist", "capitalist",
        
        # Governance & Administration
        "bureaucracy", "civil service", "ias", "ips", "administration", "executive",
        "judicial", "judiciary", "supreme court", "high court", "district court",
        "magistrate", "tribunal", "commission", "authority", "board",
        
        # Diplomatic & International
        "diplomacy", "diplomatic", "embassy", "consulate", "ambassador", "envoy",
        "foreign policy", "international relations", "bilateral", "multilateral",
        "treaty", "agreement", "mou", "summit", "delegation", "protocol"
    ],

    # BUSINESS & ECONOMY - Comprehensive financial and business terminology
    "Business": [
        # Core Business Terms
        "business", "company", "corporation", "enterprise", "firm", "organization",
        "startup", "unicorn", "sme", "msme", "mnc", "conglomerate", "subsidiary",
        "headquarters", "branch", "office", "factory", "plant", "facility",
        
        # Financial Markets
        "stock", "share", "equity", "bond", "debenture", "mutual fund", "etf",
        "nse", "bse", "sensex", "nifty", "nasdaq", "dow jones", "s&p 500",
        "market", "trading", "investor", "investment", "portfolio", "asset",
        
        # Economic Indicators
        "economy", "economic", "gdp", "inflation", "recession", "growth", "development",
        "fiscal", "monetary", "budget", "deficit", "surplus", "debt", "credit",
        "interest rate", "repo rate", "crr", "slr", "base rate", "prime rate",
        
        # Corporate Actions
        "merger", "acquisition", "takeover", "ipo", "fpo", "rights issue", "bonus",
        "dividend", "split", "buyback", "delisting", "restructuring", "divestment",
        
        # Financial Performance
        "revenue", "turnover", "profit", "loss", "ebitda", "pat", "eps", "pe ratio",
        "market cap", "valuation", "earnings", "quarterly results", "annual report",
        "balance sheet", "cash flow", "assets", "liabilities", "equity",
        
        # Banking & Finance
        "bank", "banking", "loan", "credit", "deposit", "savings", "current account",
        "fixed deposit", "recurring deposit", "npa", "bad loan", "recovery",
        "rbi", "sebi", "irdai", "nabard", "sidbi", "exim bank",
        
        # Trade & Commerce
        "trade", "export", "import", "commerce", "retail", "wholesale", "e-commerce",
        "supply chain", "logistics", "distribution", "inventory", "procurement",
        "vendor", "supplier", "customer", "consumer", "market share"
    ],

    # TECHNOLOGY - Latest tech trends with precision matching
    "Technology": [
        # Artificial Intelligence & Machine Learning
        "artificial intelligence", "ai", "machine learning", "ml", "deep learning",
        "neural network", "algorithm", "chatgpt", "openai", "generative ai",
        "large language model", "llm", "natural language processing", "nlp",
        "computer vision", "robotics", "automation", "cognitive computing",
        
        # Data & Analytics
        "big data", "data science", "data analytics", "business intelligence",
        "predictive analytics", "data mining", "database", "sql", "nosql",
        "cloud computing", "aws", "azure", "google cloud", "saas", "paas", "iaas",
        
        # Programming & Development
        "software", "programming", "coding", "development", "developer", "programmer",
        "python", "java", "javascript", "react", "angular", "node.js", "php",
        "mobile app", "web app", "api", "microservices", "devops", "agile",
        
        # Emerging Technologies
        "blockchain", "cryptocurrency", "bitcoin", "ethereum", "nft", "defi", "web3",
        "metaverse", "virtual reality", "vr", "augmented reality", "ar", "mixed reality",
        "quantum computing", "edge computing", "5g", "6g", "iot", "internet of things",
        
        # Cybersecurity
        "cybersecurity", "security", "hacking", "cyber attack", "data breach",
        "malware", "ransomware", "phishing", "firewall", "encryption", "privacy",
        
        # Tech Companies & Products
        "google", "microsoft", "apple", "amazon", "meta", "facebook", "tesla",
        "nvidia", "intel", "amd", "qualcomm", "samsung", "huawei", "xiaomi",
        "tcs", "infosys", "wipro", "hcl", "tech mahindra", "cognizant",
        
        # Hardware & Devices
        "smartphone", "tablet", "laptop", "computer", "server", "chip", "processor",
        "semiconductor", "hardware", "device", "gadget", "wearable", "smartwatch"
    ],

    # SPORTS - Comprehensive sports coverage with Indian focus
    "Sports": [
        # Cricket (Major focus for Indian audience)
        "cricket", "ipl", "bcci", "icc", "test match", "odi", "t20", "world cup",
        "champions trophy", "asia cup", "ranji trophy", "ipl auction", "mega auction",
        "wicket", "century", "half century", "six", "four", "boundary", "over",
        "innings", "declaration", "follow on", "drs", "powerplay", "death overs",
        
        # Cricket Players & Teams
        "virat kohli", "rohit sharma", "ms dhoni", "hardik pandya", "jasprit bumrah",
        "kl rahul", "rishabh pant", "ravindra jadeja", "mohammed siraj", "shubman gill",
        "csk", "mi", "rcb", "dc", "kkr", "pbks", "rr", "srh", "gt", "lsg",
        "india cricket", "team india", "men in blue", "captain", "vice captain",
        
        # Football/Soccer
        "football", "soccer", "fifa", "world cup", "uefa", "champions league",
        "premier league", "la liga", "serie a", "bundesliga", "epl",
        "manchester united", "liverpool", "arsenal", "chelsea", "manchester city",
        "real madrid", "barcelona", "psg", "bayern munich", "juventus",
        "messi", "ronaldo", "mbappe", "haaland", "neymar", "benzema",
        
        # Other Sports
        "olympics", "commonwealth games", "asian games", "paralympics",
        "tennis", "wimbledon", "us open", "french open", "australian open",
        "badminton", "all england", "thomas cup", "uber cup", "bwf",
        "hockey", "fih", "world cup hockey", "pro league",
        "basketball", "nba", "volleyball", "kabaddi", "pro kabaddi league",
        
        # General Sports Terms
        "match", "game", "tournament", "championship", "league", "season",
        "player", "athlete", "team", "coach", "captain", "manager", "referee",
        "score", "goal", "point", "win", "loss", "draw", "victory", "defeat",
        "medal", "trophy", "award", "record", "performance", "fitness", "training"
    ],

    # ENTERTAINMENT - Bollywood, Hollywood, OTT focus
    "Entertainment": [
        # Bollywood & Indian Cinema
        "bollywood", "hindi cinema", "film", "movie", "cinema", "box office",
        "actor", "actress", "director", "producer", "music director", "choreographer",
        "shah rukh khan", "salman khan", "aamir khan", "akshay kumar", "hrithik roshan",
        "deepika padukone", "priyanka chopra", "katrina kaif", "alia bhatt", "kareena kapoor",
        "amitabh bachchan", "rajinikanth", "kamal hassan", "vijay", "ajith",
        
        # Film Industry Terms
        "release", "trailer", "teaser", "poster", "casting", "shooting", "filming",
        "premiere", "screening", "multiplex", "theatre", "production house",
        "yash raj films", "dharma productions", "balaji telefilms", "eros", "t-series",
        
        # Music & Entertainment
        "music", "song", "album", "singer", "musician", "composer", "lyricist",
        "concert", "live performance", "tour", "festival", "award show",
        "filmfare", "iifa", "screen awards", "zee cine awards", "star screen awards",
        
        # Television & OTT
        "television", "tv", "serial", "show", "reality show", "talent show",
        "netflix", "amazon prime", "disney+ hotstar", "zee5", "sony liv", "voot",
        "alt balaji", "mx player", "jio cinema", "ott", "streaming", "web series",
        
        # International Entertainment
        "hollywood", "oscar", "academy awards", "golden globe", "emmy", "grammy",
        "marvel", "dc", "disney", "warner bros", "universal", "paramount",
        "avengers", "batman", "superman", "spider-man", "star wars", "game of thrones"
    ],

    # HEALTH & MEDICINE - Medical accuracy with COVID focus
    "Health": [
        # General Health Terms
        "health", "healthcare", "medical", "medicine", "hospital", "clinic", "dispensary",
        "doctor", "physician", "surgeon", "specialist", "consultant", "nurse",
        "patient", "treatment", "therapy", "diagnosis", "symptom", "disease", "illness",
        
        # COVID-19 & Pandemic
        "covid", "covid-19", "coronavirus", "pandemic", "epidemic", "outbreak",
        "vaccine", "vaccination", "pfizer", "moderna", "covishield", "covaxin",
        "booster", "booster dose", "omicron", "delta", "variant", "mutation",
        "lockdown", "quarantine", "isolation", "social distancing", "mask", "sanitizer",
        
        # Medical Specialties
        "cardiology", "neurology", "oncology", "orthopedics", "pediatrics", "gynecology",
        "dermatology", "ophthalmology", "ent", "psychiatry", "psychology", "radiology",
        "pathology", "anesthesia", "emergency medicine", "family medicine",
        
        # Medical Procedures & Tests
        "surgery", "operation", "biopsy", "scan", "mri", "ct scan", "x-ray",
        "blood test", "urine test", "ecg", "echo", "endoscopy", "colonoscopy",
        "chemotherapy", "radiotherapy", "dialysis", "transplant", "organ donation",
        
        # Health Conditions
        "diabetes", "hypertension", "cancer", "heart disease", "stroke", "asthma",
        "arthritis", "depression", "anxiety", "alzheimer", "parkinson", "epilepsy",
        "obesity", "malnutrition", "anemia", "tuberculosis", "hepatitis", "hiv aids",
        
        # Healthcare System
        "aiims", "pgimer", "apollo", "fortis", "max healthcare", "manipal",
        "medical college", "nursing college", "mbbs", "md", "ms", "dm", "mch",
        "neet", "medical council", "who", "ministry of health", "health insurance"
    ],

    # EDUCATION - Indian education system focus
    "Education": [
        # Educational Institutions
        "school", "college", "university", "institute", "academy", "coaching center",
        "iit", "iim", "nit", "iiit", "aiims", "nlu", "isi", "tiss", "jnu", "du",
        "bits pilani", "manipal", "vit", "srm", "amity", "lovely professional university",
        
        # Academic Programs
        "education", "degree", "diploma", "certificate", "course", "program",
        "undergraduate", "graduate", "postgraduate", "phd", "doctorate", "research",
        "btech", "be", "mtech", "me", "mba", "mca", "bca", "bcom", "mcom",
        "ba", "ma", "bsc", "msc", "llb", "llm", "mbbs", "md", "ms",
        
        # Examinations
        "exam", "examination", "test", "assessment", "evaluation", "board exam",
        "jee", "neet", "cat", "gate", "upsc", "ssc", "banking exam", "railway exam",
        "cbse", "icse", "state board", "ncert", "syllabus", "curriculum", "marking scheme",
        
        # Academic Terms
        "student", "teacher", "professor", "principal", "dean", "faculty", "staff",
        "admission", "enrollment", "semester", "academic year", "session",
        "attendance", "assignment", "project", "thesis", "dissertation", "research paper",
        "scholarship", "fellowship", "stipend", "fees", "tuition", "hostel", "campus",
        
        # Online Education
        "online education", "e-learning", "digital learning", "mooc", "coursera",
        "edx", "udemy", "byju's", "unacademy", "vedantu", "khan academy",
        "zoom classes", "google classroom", "microsoft teams", "webinar"
    ],

    # ENVIRONMENT & CLIMATE - Climate change focus
    "Environment": [
        # Climate Change
        "climate change", "global warming", "greenhouse effect", "carbon footprint",
        "carbon emission", "co2", "methane", "greenhouse gas", "fossil fuel",
        "renewable energy", "clean energy", "sustainable development", "sustainability",
        
        # Environmental Issues
        "pollution", "air pollution", "water pollution", "noise pollution", "soil pollution",
        "plastic pollution", "marine pollution", "smog", "acid rain", "ozone depletion",
        "deforestation", "desertification", "soil erosion", "biodiversity loss",
        
        # Natural Disasters
        "natural disaster", "earthquake", "tsunami", "cyclone", "hurricane", "tornado",
        "flood", "drought", "wildfire", "forest fire", "landslide", "avalanche",
        "volcanic eruption", "heat wave", "cold wave", "monsoon", "extreme weather",
        
        # Conservation & Ecology
        "environment", "ecology", "ecosystem", "biodiversity", "conservation",
        "wildlife", "endangered species", "extinction", "habitat", "forest",
        "national park", "wildlife sanctuary", "biosphere reserve", "tiger reserve",
        "coral reef", "wetland", "mangrove", "rainforest", "marine life",
        
        # Green Technology
        "solar energy", "wind energy", "hydroelectric", "nuclear energy", "biofuel",
        "electric vehicle", "ev", "tesla", "hybrid car", "solar panel", "wind turbine",
        "recycling", "waste management", "composting", "organic farming", "green building",
        
        # International Agreements
        "paris agreement", "kyoto protocol", "cop summit", "unfccc", "ipcc report",
        "net zero", "carbon neutral", "emission target", "climate action", "green fund"
    ],

    # CRIME & LAW - Legal system with Indian context
    "Crime": [
        # Criminal Activities
        "crime", "criminal", "murder", "homicide", "assault", "robbery", "theft",
        "burglary", "fraud", "scam", "corruption", "bribery", "embezzlement",
        "money laundering", "tax evasion", "cybercrime", "hacking", "phishing",
        "identity theft", "drug trafficking", "smuggling", "human trafficking",
        "terrorism", "rape", "sexual assault", "domestic violence", "kidnapping",
        
        # Law Enforcement
        "police", "cop", "officer", "inspector", "superintendent", "commissioner",
        "cbi", "ed", "ncb", "nia", "raw", "ib", "crpf", "bsf", "itbp", "cisf",
        "investigation", "inquiry", "raid", "search", "arrest", "custody", "bail",
        "remand", "interrogation", "charge sheet", "fir", "complaint", "case",
        
        # Legal System
        "court", "judge", "magistrate", "justice", "chief justice", "lawyer",
        "advocate", "attorney", "prosecutor", "public prosecutor", "defense counsel",
        "supreme court", "high court", "district court", "sessions court", "family court",
        "trial", "hearing", "judgment", "verdict", "sentence", "conviction", "acquittal",
        
        # Legal Processes
        "law", "legal", "act", "section", "ipc", "crpc", "evidence act", "constitution",
        "fundamental rights", "directive principles", "amendment", "ordinance",
        "petition", "writ", "habeas corpus", "mandamus", "certiorari", "prohibition",
        "bail", "anticipatory bail", "parole", "probation", "fine", "imprisonment",
        "life sentence", "death penalty", "capital punishment", "appeal", "revision"
    ],

    # INTERNATIONAL NEWS - Global affairs with precision
    "International": [
        # Major Countries & Regions
        "usa", "united states", "america", "china", "russia", "japan", "germany",
        "france", "uk", "united kingdom", "italy", "canada", "australia", "brazil",
        "south korea", "north korea", "iran", "israel", "palestine", "saudi arabia",
        "turkey", "pakistan", "bangladesh", "sri lanka", "nepal", "bhutan", "myanmar",
        
        # International Organizations
        "united nations", "un", "unesco", "unicef", "who", "imf", "world bank",
        "nato", "european union", "eu", "asean", "saarc", "g7", "g20", "brics",
        "wto", "icc", "international court of justice", "security council",
        
        # Diplomatic Relations
        "diplomacy", "diplomatic", "foreign policy", "international relations",
        "embassy", "consulate", "ambassador", "envoy", "summit", "bilateral",
        "multilateral", "treaty", "agreement", "mou", "pact", "alliance",
        "sanctions", "embargo", "trade war", "tariff", "quota", "export ban",
        
        # Global Issues
        "global", "international", "worldwide", "cross-border", "transnational",
        "refugee", "asylum", "immigration", "visa", "border", "customs",
        "humanitarian crisis", "peacekeeping", "conflict resolution", "ceasefire",
        "arms control", "nuclear proliferation", "terrorism", "cyber warfare",
        
        # Current Global Events
        "ukraine war", "russia ukraine", "taiwan strait", "south china sea",
        "middle east", "afghan crisis", "israel palestine", "iran nuclear deal",
        "brexit", "climate summit", "covid pandemic", "global recession"
    ]
}

# categories.py

import re
from typing import Dict, List, Tuple
from functools import lru_cache

# Enhanced categories dictionary with maximum accuracy
categories = {
    # POLITICS & GOVERNANCE - Maximum accuracy with specific political terminology
    "Politics": [
        # Core Political Terms
        "government", "governance", "political", "politics", "policy", "policies", 
        "minister", "prime minister", "president", "vice president", "chief minister",
        "governor", "lieutenant governor", "mayor", "deputy", "secretary", "cabinet",
        
        # Elections & Democracy
        "election", "electoral", "vote", "voting", "voter", "ballot", "polling", "poll",
        "campaign", "candidate", "nomination", "primary", "general election", "by-election",
        "referendum", "plebiscite", "constituency", "electorate", "swing vote", "exit poll",
        
        # Legislative Bodies
        "parliament", "parliamentary", "congress", "senate", "house", "assembly", 
        "legislature", "lok sabha", "rajya sabha", "state assembly", "municipal corporation",
        "council", "committee", "subcommittee", "caucus", "faction",
        
        # Political Processes
        "legislation", "bill", "act", "amendment", "resolution", "motion", "debate",
        "hearing", "session", "sitting", "adjournment", "prorogation", "dissolution",
        "impeachment", "no confidence", "censure", "veto", "override",
        
        # Political Ideologies & Parties
        "bjp", "congress", "aap", "tmc", "dmk", "aiadmk", "left", "right", "center",
        "coalition", "alliance", "opposition", "ruling party", "majority", "minority",
        "liberal", "conservative", "progressive", "socialist", "communist", "capitalist",
        
        # Governance & Administration
        "bureaucracy", "civil service", "ias", "ips", "administration", "executive",
        "judicial", "judiciary", "supreme court", "high court", "district court",
        "magistrate", "tribunal", "commission", "authority", "board",
        
        # Diplomatic & International
        "diplomacy", "diplomatic", "embassy", "consulate", "ambassador", "envoy",
        "foreign policy", "international relations", "bilateral", "multilateral",
        "treaty", "agreement", "mou", "summit", "delegation", "protocol"
    ],

    # BUSINESS & ECONOMY - Comprehensive financial and business terminology
    "Business": [
        # Core Business Terms
        "business", "company", "corporation", "enterprise", "firm", "organization",
        "startup", "unicorn", "sme", "msme", "mnc", "conglomerate", "subsidiary",
        "headquarters", "branch", "office", "factory", "plant", "facility",
        
        # Financial Markets
        "stock", "share", "equity", "bond", "debenture", "mutual fund", "etf",
        "nse", "bse", "sensex", "nifty", "nasdaq", "dow jones", "s&p 500",
        "market", "trading", "investor", "investment", "portfolio", "asset",
        
        # Economic Indicators
        "economy", "economic", "gdp", "inflation", "recession", "growth", "development",
        "fiscal", "monetary", "budget", "deficit", "surplus", "debt", "credit",
        "interest rate", "repo rate", "crr", "slr", "base rate", "prime rate",
        
        # Corporate Actions
        "merger", "acquisition", "takeover", "ipo", "fpo", "rights issue", "bonus",
        "dividend", "split", "buyback", "delisting", "restructuring", "divestment",
        
        # Financial Performance
        "revenue", "turnover", "profit", "loss", "ebitda", "pat", "eps", "pe ratio",
        "market cap", "valuation", "earnings", "quarterly results", "annual report",
        "balance sheet", "cash flow", "assets", "liabilities", "equity",
        
        # Banking & Finance
        "bank", "banking", "loan", "credit", "deposit", "savings", "current account",
        "fixed deposit", "recurring deposit", "npa", "bad loan", "recovery",
        "rbi", "sebi", "irdai", "nabard", "sidbi", "exim bank",
        
        # Trade & Commerce
        "trade", "export", "import", "commerce", "retail", "wholesale", "e-commerce",
        "supply chain", "logistics", "distribution", "inventory", "procurement",
        "vendor", "supplier", "customer", "consumer", "market share"
    ],

    # TECHNOLOGY - Latest tech trends with precision matching
    "Technology": [
        # Artificial Intelligence & Machine Learning
        "artificial intelligence", "ai", "machine learning", "ml", "deep learning",
        "neural network", "algorithm", "chatgpt", "openai", "generative ai",
        "large language model", "llm", "natural language processing", "nlp",
        "computer vision", "robotics", "automation", "cognitive computing",
        
        # Data & Analytics
        "big data", "data science", "data analytics", "business intelligence",
        "predictive analytics", "data mining", "database", "sql", "nosql",
        "cloud computing", "aws", "azure", "google cloud", "saas", "paas", "iaas",
        
        # Programming & Development
        "software", "programming", "coding", "development", "developer", "programmer",
        "python", "java", "javascript", "react", "angular", "node.js", "php",
        "mobile app", "web app", "api", "microservices", "devops", "agile",
        
        # Emerging Technologies
        "blockchain", "cryptocurrency", "bitcoin", "ethereum", "nft", "defi", "web3",
        "metaverse", "virtual reality", "vr", "augmented reality", "ar", "mixed reality",
        "quantum computing", "edge computing", "5g", "6g", "iot", "internet of things",
        
        # Cybersecurity
        "cybersecurity", "security", "hacking", "cyber attack", "data breach",
        "malware", "ransomware", "phishing", "firewall", "encryption", "privacy",
        
        # Tech Companies & Products
        "google", "microsoft", "apple", "amazon", "meta", "facebook", "tesla",
        "nvidia", "intel", "amd", "qualcomm", "samsung", "huawei", "xiaomi",
        "tcs", "infosys", "wipro", "hcl", "tech mahindra", "cognizant",
        
        # Hardware & Devices
        "smartphone", "tablet", "laptop", "computer", "server", "chip", "processor",
        "semiconductor", "hardware", "device", "gadget", "wearable", "smartwatch"
    ],

    # SPORTS - Comprehensive sports coverage with Indian focus
    "Sports": [
        # Cricket (Major focus for Indian audience)
        "cricket", "ipl", "bcci", "icc", "test match", "odi", "t20", "world cup",
        "champions trophy", "asia cup", "ranji trophy", "ipl auction", "mega auction",
        "wicket", "century", "half century", "six", "four", "boundary", "over",
        "innings", "declaration", "follow on", "drs", "powerplay", "death overs",
        
        # Cricket Players & Teams
        "virat kohli", "rohit sharma", "ms dhoni", "hardik pandya", "jasprit bumrah",
        "kl rahul", "rishabh pant", "ravindra jadeja", "mohammed siraj", "shubman gill",
        "csk", "mi", "rcb", "dc", "kkr", "pbks", "rr", "srh", "gt", "lsg",
        "india cricket", "team india", "men in blue", "captain", "vice captain",
        
        # Football/Soccer
        "football", "soccer", "fifa", "world cup", "uefa", "champions league",
        "premier league", "la liga", "serie a", "bundesliga", "epl",
        "manchester united", "liverpool", "arsenal", "chelsea", "manchester city",
        "real madrid", "barcelona", "psg", "bayern munich", "juventus",
        "messi", "ronaldo", "mbappe", "haaland", "neymar", "benzema",
        
        # Other Sports
        "olympics", "commonwealth games", "asian games", "paralympics",
        "tennis", "wimbledon", "us open", "french open", "australian open",
        "badminton", "all england", "thomas cup", "uber cup", "bwf",
        "hockey", "fih", "world cup hockey", "pro league",
        "basketball", "nba", "volleyball", "kabaddi", "pro kabaddi league",
        
        # General Sports Terms
        "match", "game", "tournament", "championship", "league", "season",
        "player", "athlete", "team", "coach", "captain", "manager", "referee",
        "score", "goal", "point", "win", "loss", "draw", "victory", "defeat",
        "medal", "trophy", "award", "record", "performance", "fitness", "training"
    ],

    # ENTERTAINMENT - Bollywood, Hollywood, OTT focus
    "Entertainment": [
        # Bollywood & Indian Cinema
        "bollywood", "hindi cinema", "film", "movie", "cinema", "box office",
        "actor", "actress", "director", "producer", "music director", "choreographer",
        "shah rukh khan", "salman khan", "aamir khan", "akshay kumar", "hrithik roshan",
        "deepika padukone", "priyanka chopra", "katrina kaif", "alia bhatt", "kareena kapoor",
        "amitabh bachchan", "rajinikanth", "kamal hassan", "vijay", "ajith",
        
        # Film Industry Terms
        "release", "trailer", "teaser", "poster", "casting", "shooting", "filming",
        "premiere", "screening", "multiplex", "theatre", "production house",
        "yash raj films", "dharma productions", "balaji telefilms", "eros", "t-series",
        
        # Music & Entertainment
        "music", "song", "album", "singer", "musician", "composer", "lyricist",
        "concert", "live performance", "tour", "festival", "award show",
        "filmfare", "iifa", "screen awards", "zee cine awards", "star screen awards",
        
        # Television & OTT
        "television", "tv", "serial", "show", "reality show", "talent show",
        "netflix", "amazon prime", "disney+ hotstar", "zee5", "sony liv", "voot",
        "alt balaji", "mx player", "jio cinema", "ott", "streaming", "web series",
        
        # International Entertainment
        "hollywood", "oscar", "academy awards", "golden globe", "emmy", "grammy",
        "marvel", "dc", "disney", "warner bros", "universal", "paramount",
        "avengers", "batman", "superman", "spider-man", "star wars", "game of thrones"
    ],

    # HEALTH & MEDICINE - Medical accuracy with COVID focus
    "Health": [
        # General Health Terms
        "health", "healthcare", "medical", "medicine", "hospital", "clinic", "dispensary",
        "doctor", "physician", "surgeon", "specialist", "consultant", "nurse",
        "patient", "treatment", "therapy", "diagnosis", "symptom", "disease", "illness",
        
        # COVID-19 & Pandemic
        "covid", "covid-19", "coronavirus", "pandemic", "epidemic", "outbreak",
        "vaccine", "vaccination", "pfizer", "moderna", "covishield", "covaxin",
        "booster", "booster dose", "omicron", "delta", "variant", "mutation",
        "lockdown", "quarantine", "isolation", "social distancing", "mask", "sanitizer",
        
        # Medical Specialties
        "cardiology", "neurology", "oncology", "orthopedics", "pediatrics", "gynecology",
        "dermatology", "ophthalmology", "ent", "psychiatry", "psychology", "radiology",
        "pathology", "anesthesia", "emergency medicine", "family medicine",
        
        # Medical Procedures & Tests
        "surgery", "operation", "biopsy", "scan", "mri", "ct scan", "x-ray",
        "blood test", "urine test", "ecg", "echo", "endoscopy", "colonoscopy",
        "chemotherapy", "radiotherapy", "dialysis", "transplant", "organ donation",
        
        # Health Conditions
        "diabetes", "hypertension", "cancer", "heart disease", "stroke", "asthma",
        "arthritis", "depression", "anxiety", "alzheimer", "parkinson", "epilepsy",
        "obesity", "malnutrition", "anemia", "tuberculosis", "hepatitis", "hiv aids",
        
        # Healthcare System
        "aiims", "pgimer", "apollo", "fortis", "max healthcare", "manipal",
        "medical college", "nursing college", "mbbs", "md", "ms", "dm", "mch",
        "neet", "medical council", "who", "ministry of health", "health insurance"
    ],

    # EDUCATION - Indian education system focus
    "Education": [
        # Educational Institutions
        "school", "college", "university", "institute", "academy", "coaching center",
        "iit", "iim", "nit", "iiit", "aiims", "nlu", "isi", "tiss", "jnu", "du",
        "bits pilani", "manipal", "vit", "srm", "amity", "lovely professional university",
        
        # Academic Programs
        "education", "degree", "diploma", "certificate", "course", "program",
        "undergraduate", "graduate", "postgraduate", "phd", "doctorate", "research",
        "btech", "be", "mtech", "me", "mba", "mca", "bca", "bcom", "mcom",
        "ba", "ma", "bsc", "msc", "llb", "llm", "mbbs", "md", "ms",
        
        # Examinations
        "exam", "examination", "test", "assessment", "evaluation", "board exam",
        "jee", "neet", "cat", "gate", "upsc", "ssc", "banking exam", "railway exam",
        "cbse", "icse", "state board", "ncert", "syllabus", "curriculum", "marking scheme",
        
        # Academic Terms
        "student", "teacher", "professor", "principal", "dean", "faculty", "staff",
        "admission", "enrollment", "semester", "academic year", "session",
        "attendance", "assignment", "project", "thesis", "dissertation", "research paper",
        "scholarship", "fellowship", "stipend", "fees", "tuition", "hostel", "campus",
        
        # Online Education
        "online education", "e-learning", "digital learning", "mooc", "coursera",
        "edx", "udemy", "byju's", "unacademy", "vedantu", "khan academy",
        "zoom classes", "google classroom", "microsoft teams", "webinar"
    ],

    # ENVIRONMENT & CLIMATE - Climate change focus
    "Environment": [
        # Climate Change
        "climate change", "global warming", "greenhouse effect", "carbon footprint",
        "carbon emission", "co2", "methane", "greenhouse gas", "fossil fuel",
        "renewable energy", "clean energy", "sustainable development", "sustainability",
        
        # Environmental Issues
        "pollution", "air pollution", "water pollution", "noise pollution", "soil pollution",
        "plastic pollution", "marine pollution", "smog", "acid rain", "ozone depletion",
        "deforestation", "desertification", "soil erosion", "biodiversity loss",
        
        # Natural Disasters
        "natural disaster", "earthquake", "tsunami", "cyclone", "hurricane", "tornado",
        "flood", "drought", "wildfire", "forest fire", "landslide", "avalanche",
        "volcanic eruption", "heat wave", "cold wave", "monsoon", "extreme weather",
        
        # Conservation & Ecology
        "environment", "ecology", "ecosystem", "biodiversity", "conservation",
        "wildlife", "endangered species", "extinction", "habitat", "forest",
        "national park", "wildlife sanctuary", "biosphere reserve", "tiger reserve",
        "coral reef", "wetland", "mangrove", "rainforest", "marine life",
        
        # Green Technology
        "solar energy", "wind energy", "hydroelectric", "nuclear energy", "biofuel",
        "electric vehicle", "ev", "tesla", "hybrid car", "solar panel", "wind turbine",
        "recycling", "waste management", "composting", "organic farming", "green building",
        
        # International Agreements
        "paris agreement", "kyoto protocol", "cop summit", "unfccc", "ipcc report",
        "net zero", "carbon neutral", "emission target", "climate action", "green fund"
    ],

    # CRIME & LAW - Legal system with Indian context
    "Crime": [
        # Criminal Activities
        "crime", "criminal", "murder", "homicide", "assault", "robbery", "theft",
        "burglary", "fraud", "scam", "corruption", "bribery", "embezzlement",
        "money laundering", "tax evasion", "cybercrime", "hacking", "phishing",
        "identity theft", "drug trafficking", "smuggling", "human trafficking",
        "terrorism", "rape", "sexual assault", "domestic violence", "kidnapping",
        
        # Law Enforcement
        "police", "cop", "officer", "inspector", "superintendent", "commissioner",
        "cbi", "ed", "ncb", "nia", "raw", "ib", "crpf", "bsf", "itbp", "cisf",
        "investigation", "inquiry", "raid", "search", "arrest", "custody", "bail",
        "remand", "interrogation", "charge sheet", "fir", "complaint", "case",
        
        # Legal System
        "court", "judge", "magistrate", "justice", "chief justice", "lawyer",
        "advocate", "attorney", "prosecutor", "public prosecutor", "defense counsel",
        "supreme court", "high court", "district court", "sessions court", "family court",
        "trial", "hearing", "judgment", "verdict", "sentence", "conviction", "acquittal",
        
        # Legal Processes
        "law", "legal", "act", "section", "ipc", "crpc", "evidence act", "constitution",
        "fundamental rights", "directive principles", "amendment", "ordinance",
        "petition", "writ", "habeas corpus", "mandamus", "certiorari", "prohibition",
        "bail", "anticipatory bail", "parole", "probation", "fine", "imprisonment",
        "life sentence", "death penalty", "capital punishment", "appeal", "revision"
    ],

    # INTERNATIONAL NEWS - Global affairs with precision
    "International": [
        # Major Countries & Regions
        "usa", "united states", "america", "china", "russia", "japan", "germany",
        "france", "uk", "united kingdom", "italy", "canada", "australia", "brazil",
        "south korea", "north korea", "iran", "israel", "palestine", "saudi arabia",
        "turkey", "pakistan", "bangladesh", "sri lanka", "nepal", "bhutan", "myanmar",
        
        # International Organizations
        "united nations", "un", "unesco", "unicef", "who", "imf", "world bank",
        "nato", "european union", "eu", "asean", "saarc", "g7", "g20", "brics",
        "wto", "icc", "international court of justice", "security council",
        
        # Diplomatic Relations
        "diplomacy", "diplomatic", "foreign policy", "international relations",
        "embassy", "consulate", "ambassador", "envoy", "summit", "bilateral",
        "multilateral", "treaty", "agreement", "mou", "pact", "alliance",
        "sanctions", "embargo", "trade war", "tariff", "quota", "export ban",
        
        # Global Issues
        "global", "international", "worldwide", "cross-border", "transnational",
        "refugee", "asylum", "immigration", "visa", "border", "customs",
        "humanitarian crisis", "peacekeeping", "conflict resolution", "ceasefire",
        "arms control", "nuclear proliferation", "terrorism", "cyber warfare",
        
        # Current Global Events
        "ukraine war", "russia ukraine", "taiwan strait", "south china sea",
        "middle east", "afghan crisis", "israel palestine", "iran nuclear deal",
        "brexit", "climate summit", "covid pandemic", "global recession"
    ]
}


# Helper function to preprocess text
def preprocess_text(text: str) -> str:
    """Clean and preprocess text for better matching"""
    # Convert to lowercase
    text = text.lower()
    
    # Remove special characters but keep spaces and alphanumeric
    text = re.sub(r'[^\w\s]', ' ', text)
    
    # Replace multiple spaces with single space
    text = re.sub(r'\s+', ' ', text)
    
    # Strip leading/trailing spaces
    return text.strip()


# Advanced categorization function with scoring
@lru_cache(maxsize=2000)
def categorize_content(title: str, summary: str) -> str:
    """
    Advanced categorization function with weighted scoring and phrase matching.
    
    Args:
        title (str): News article title
        summary (str): News article summary/description
        
    Returns:
        str: Best matching category or "General" if no good match
    """
    # Combine and preprocess text
    full_text = f"{title} {summary}"
    clean_text = preprocess_text(full_text)
    
    # Create word set for faster lookup
    words = set(clean_text.split())
    
    category_scores = {}
    
    for category, keywords in categories.items():
        score = 0
        matched_keywords = []
        
        for keyword in keywords:
            keyword_lower = keyword.lower()
            
            # Handle multi-word keywords (phrases)
            if ' ' in keyword_lower:
                # Check for exact phrase match
                if keyword_lower in clean_text:
                    # Higher weight for phrase matches
                    phrase_weight = len(keyword_lower.split()) * 2
                    score += phrase_weight
                    matched_keywords.append(keyword_lower)
            else:
                # Single word matching
                if keyword_lower in words:
                    score += 1
                    matched_keywords.append(keyword_lower)
        
        # Store results if any matches found
        if score > 0:
            category_scores[category] = {
                'score': score,
                'keywords': matched_keywords,
                'keyword_count': len(matched_keywords)
            }
    
    # Return best match if score is significant enough
    if category_scores:
        # Sort by score, then by number of matched keywords
        best_match = max(
            category_scores.items(),
            key=lambda x: (x[1]['score'], x[1]['keyword_count'])
        )
        
        # Set minimum threshold to avoid weak matches
        if best_match[1]['score'] >= 1:
            return best_match[0]
    
    return "General"


# Function to get category with confidence score
@lru_cache(maxsize=1000)
def categorize_with_confidence(title: str, summary: str) -> Tuple[str, float, List[str]]:
    """
    Categorize content and return confidence score with matched keywords.
    
    Args:
        title (str): News article title
        summary (str): News article summary
        
    Returns:
        Tuple[str, float, List[str]]: (category, confidence_score, matched_keywords)
    """
    full_text = f"{title} {summary}"
    clean_text = preprocess_text(full_text)
    words = set(clean_text.split())
    total_words = len(words)
    
    category_scores = {}
    
    for category, keywords in categories.items():
        score = 0
        matched_keywords = []
        
        for keyword in keywords:
            keyword_lower = keyword.lower()
            
            if ' ' in keyword_lower:
                if keyword_lower in clean_text:
                    phrase_weight = len(keyword_lower.split()) * 2
                    score += phrase_weight
                    matched_keywords.append(keyword_lower)
            else:
                if keyword_lower in words:
                    score += 1
                    matched_keywords.append(keyword_lower)
        
        if score > 0:
            # Calculate confidence based on score and text length
            confidence = min((score / max(total_words * 0.1, 1)) * 100, 100)
            category_scores[category] = {
                'score': score,
                'confidence': confidence,
                'keywords': matched_keywords
            }
    
    if category_scores:
        best_match = max(category_scores.items(), key=lambda x: x[1]['score'])
        if best_match[1]['score'] >= 1:
            return (
                best_match[0],
                best_match[1]['confidence'],
                best_match[1]['keywords']
            )
    
    return ("General", 0.0, [])


# Function to get all matching categories (for debugging)
def get_all_matches(title: str, summary: str) -> Dict[str, Dict]:
    """
    Get all matching categories with their scores for debugging.
    
    Args:
        title (str): News article title
        summary (str): News article summary
        
    Returns:
        Dict[str, Dict]: All categories with their match information
    """
    full_text = f"{title} {summary}"
    clean_text = preprocess_text(full_text)
    words = set(clean_text.split())
    
    all_matches = {}
    
    for category, keywords in categories.items():
        score = 0
        matched_keywords = []
        
        for keyword in keywords:
            keyword_lower = keyword.lower()
            
            if ' ' in keyword_lower:
                if keyword_lower in clean_text:
                    phrase_weight = len(keyword_lower.split()) * 2
                    score += phrase_weight
                    matched_keywords.append(keyword_lower)
            else:
                if keyword_lower in words:
                    score += 1
                    matched_keywords.append(keyword_lower)
        
        all_matches[category] = {
            'score': score,
            'matched_keywords': matched_keywords,
            'keyword_count': len(matched_keywords)
        }
    
    # Sort by score
    return dict(sorted(all_matches.items(), key=lambda x: x[1]['score'], reverse=True))


# Cache management functions
def clear_categorization_cache():
    """Clear the LRU cache for categorization functions"""
    categorize_content.cache_clear()
    categorize_with_confidence.cache_clear()


def get_categorization_cache_info():
    """Get cache statistics for categorization functions"""
    return {
        'categorize_content': categorize_content.cache_info()._asdict(),
        'categorize_with_confidence': categorize_with_confidence.cache_info()._asdict()
    }
